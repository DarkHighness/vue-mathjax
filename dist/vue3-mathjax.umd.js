(function(s,c){typeof exports=="object"&&typeof module!="undefined"?module.exports=c(require("vue")):typeof define=="function"&&define.amd?define(["vue"],c):(s=typeof globalThis!="undefined"?globalThis:s||self,s["vue-mathjax"]=c(s.Vue))})(this,function(s){"use strict";function c(e,t,r,n){var a,o=!1,g=0;function J(){a&&clearTimeout(a)}function T(){J(),o=!0}typeof t!="boolean"&&(n=r,r=t,t=void 0);function A(){for(var j=arguments.length,M=new Array(j),p=0;p<j;p++)M[p]=arguments[p];var D=this,v=Date.now()-g;if(o)return;function l(){g=Date.now(),r.apply(D,M)}function Q(){a=void 0}n&&!a&&l(),J(),n===void 0&&v>e?l():t!==!0&&(a=setTimeout(n?Q:l,n===void 0?e-v:e))}return A.cancel=T,A}function $(e,t,r){return r===void 0?c(e,t,!1):c(e,r,t!==!1)}let d=!1,u=!1,i=[];function h(){return window.MathJax}function C(){const e=h();if((!e||!e.version)&&(d=!1,u=!1,i.splice(0,i.length)),!d){const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js",t.async=!0,document.head.appendChild(t),d=!0}}function y(e={},t){const n=Object.assign({},{tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEnvironments:!0,processRefs:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code","annotation","annotation-xml"],ignoreHtmlClass:"tex2jax_ignore"},startup:{pageReady:()=>{u=!0,h().typeset(i.map(a=>a.el)),i.forEach(a=>{a.type=="async"&&a.callback()}),i.splice(0,i.length),t&&t()}},svg:{fontCache:"global"}},e);window.MathJax=n,C()}function E(e){if(!u){Array.isArray(e)?i.concat(e.map(t=>({type:"sync",el:t}))):i.push({type:"sync",el:e});return}window.MathJax.typeset(Array.isArray(e)?e:[e])}async function R(e){return new Promise((t,r)=>{if(u)return window.MathJax.typesetPromise(Array.isArray(e)?e:[e]);if(Array.isArray(e)){for(let n=0;n<e.length;n++)i.push({type:"sync",el:e[n]});i.push({type:"async",el:e[e.length-1],callback:t})}else i.push({type:"async",el:e,callback:t})})}let f=new Set,m=()=>{let e=[];for(const t of f.values())e.push(t),window.MathJax.typeset(e);f.clear()},x=$(500,!1,m);function S(e,t=!1){u||(Array.isArray(e)?i.concat(e.map(r=>({type:"sync",el:r}))):i.push({type:"sync",el:e})),Array.isArray(e)?e.forEach(r=>f.add(r)):f.add(e),t?(x.cancel(),m()):x()}const w=s.defineComponent({setup(e){let t;const r=()=>{!t||S(t)};return s.onMounted(()=>{var n,a,o;y(),t=(o=(a=(n=s.getCurrentInstance())==null?void 0:n.vnode)==null?void 0:a.el)==null?void 0:o.parentNode,s.nextTick(()=>{r()})}),s.onUpdated(()=>{var n,a,o;t=(o=(a=(n=s.getCurrentInstance())==null?void 0:n.vnode)==null?void 0:a.el)==null?void 0:o.parentNode,r()}),s.onUnmounted(()=>{t=null}),(n,a)=>s.renderSlot(n.$slots,"default")}});function I(e){e.component("math-jax",w)}var O={install:I,MathJax:w,initMathJax:y,renderByMathJax:R,renderByMathJaxSync:E};return O});
